import { Equal, Expect } from "type-testing";

type SudoKu1 = [
  [["ğŸ’¨", "ğŸ’ƒ", "ğŸ¦Œ"], ["â˜„ï¸", "â¤ï¸", "ğŸŒ©ï¸"], ["ğŸŒŸ", "âš¡", "ğŸ”´"]],
  [["ğŸŒŸ", "âš¡", "ğŸ”´"], ["ğŸ’¨", "ğŸ’ƒ", "ğŸ¦Œ"], ["â˜„ï¸", "â¤ï¸", "ğŸŒ©ï¸"]],
  [["â˜„ï¸", "â¤ï¸", "ğŸŒ©ï¸"], ["ğŸŒŸ", "âš¡", "ğŸ”´"], ["ğŸ’¨", "ğŸ’ƒ", "ğŸ¦Œ"]],
  /*------------------------------------------------------*/
  [["ğŸ¦Œ", "ğŸ’¨", "ğŸ’ƒ"], ["âš¡", "â˜„ï¸", "â¤ï¸"], ["ğŸ”´", "ğŸŒ©ï¸", "ğŸŒŸ"]],
  [["ğŸŒ©ï¸", "ğŸ”´", "ğŸŒŸ"], ["ğŸ¦Œ", "ğŸ’¨", "ğŸ’ƒ"], ["âš¡", "â˜„ï¸", "â¤ï¸"]],
  [["âš¡", "â˜„ï¸", "â¤ï¸"], ["ğŸŒ©ï¸", "ğŸ”´", "ğŸŒŸ"], ["ğŸ¦Œ", "ğŸ’¨", "ğŸ’ƒ"]],
  /*------------------------------------------------------*/
  [["ğŸ’ƒ", "ğŸ¦Œ", "ğŸ’¨"], ["â¤ï¸", "ğŸŒŸ", "â˜„ï¸"], ["ğŸŒ©ï¸", "ğŸ”´", "âš¡"]],
  [["ğŸ”´", "ğŸŒ©ï¸", "âš¡"], ["ğŸ’ƒ", "ğŸ¦Œ", "ğŸ’¨"], ["â¤ï¸", "ğŸŒŸ", "â˜„ï¸"]],
  [["â¤ï¸", "ğŸŒŸ", "â˜„ï¸"], ["ğŸ”´", "ğŸŒ©ï¸", "âš¡"], ["ğŸ’ƒ", "ğŸ¦Œ", "ğŸ’¨"]]
];

type SudoKu2 = [
  [["ğŸŒ©ï¸", "ğŸ’¨", "â˜„ï¸"], ["ğŸŒŸ", "ğŸ¦Œ", "âš¡"], ["â¤ï¸", "ğŸ”´", "ğŸ’ƒ"]],
  [["ğŸŒŸ", "âš¡", "â¤ï¸"], ["ğŸ”´", "ğŸ’ƒ", "â˜„ï¸"], ["ğŸŒ©ï¸", "ğŸ’¨", "ğŸ¦Œ"]],
  [["ğŸ”´", "ğŸ¦Œ", "ğŸ’ƒ"], ["ğŸ’¨", "â¤ï¸", "ğŸŒ©ï¸"], ["ğŸŒŸ", "âš¡", "â˜„ï¸"]],
  /*------------------------------------------------------*/
  [["â¤ï¸", "â˜„ï¸", "ğŸŒ©ï¸"], ["ğŸ’ƒ", "âš¡", "ğŸ”´"], ["ğŸ’¨", "ğŸ¦Œ", "ğŸŒŸ"]],
  [["ğŸ¦Œ", "ğŸ’ƒ", "âš¡"], ["ğŸŒ©ï¸", "ğŸŒŸ", "ğŸ’¨"], ["ğŸ”´", "â˜„ï¸", "â¤ï¸"]],
  [["ğŸ’¨", "ğŸŒŸ", "ğŸ”´"], ["ğŸ¦Œ", "â˜„ï¸", "â¤ï¸"], ["âš¡", "ğŸ’ƒ", "ğŸŒ©ï¸"]],
  /*------------------------------------------------------*/
  [["â˜„ï¸", "ğŸ”´", "ğŸ’¨"], ["â¤ï¸", "ğŸŒ©ï¸", "ğŸ¦Œ"], ["ğŸ’ƒ", "ğŸŒŸ", "âš¡"]],
  [["ğŸ’ƒ", "â¤ï¸", "ğŸ¦Œ"], ["âš¡", "ğŸ”´", "ğŸŒŸ"], ["â˜„ï¸", "ğŸŒ©ï¸", "ğŸ’¨"]],
  [["âš¡", "ğŸŒ©ï¸", "ğŸŒŸ"], ["â˜„ï¸", "ğŸ’¨", "ğŸ’ƒ"], ["ğŸ¦Œ", "â¤ï¸", "ğŸ”´"]]
];

type SudoKu3 = [
  [["ğŸ¦Œ", "ğŸ”´", "ğŸ’ƒ"], ["ğŸŒ©ï¸", "â˜„ï¸", "ğŸ’¨"], ["âš¡", "â¤ï¸", "ğŸŒŸ"]],
  [["ğŸŒŸ", "âš¡", "ğŸ’¨"], ["â¤ï¸", "ğŸ’ƒ", "ğŸ”´"], ["â˜„ï¸", "ğŸŒ©ï¸", "ğŸ¦Œ"]],
  [["â˜„ï¸", "ğŸŒ©ï¸", "â¤ï¸"], ["âš¡", "ğŸŒŸ", "ğŸ¦Œ"], ["ğŸ’ƒ", "ğŸ”´", "ğŸ’¨"]],
  /*------------------------------------------------------*/
  [["ğŸŒ©ï¸", "ğŸ’ƒ", "ğŸ”´"], ["ğŸ¦Œ", "ğŸ’¨", "âš¡"], ["ğŸŒŸ", "â˜„ï¸", "â¤ï¸"]],
  [["â¤ï¸", "â˜„ï¸", "âš¡"], ["ğŸ’ƒ", "ğŸŒ©ï¸", "ğŸŒŸ"], ["ğŸ¦Œ", "ğŸ’¨", "ğŸ”´"]],
  [["ğŸ’¨", "ğŸŒŸ", "ğŸ¦Œ"], ["â˜„ï¸", "ğŸ”´", "â¤ï¸"], ["ğŸŒ©ï¸", "ğŸ’ƒ", "âš¡"]],
  /*------------------------------------------------------*/
  [["ğŸ’ƒ", "ğŸ’¨", "ğŸŒŸ"], ["ğŸ”´", "ğŸ¦Œ", "â˜„ï¸"], ["â¤ï¸", "âš¡", "ğŸŒ©ï¸"]],
  [["ğŸ”´", "â¤ï¸", "â˜„ï¸"], ["ğŸŒŸ", "âš¡", "ğŸŒ©ï¸"], ["ğŸ’¨", "ğŸ¦Œ", "ğŸ’ƒ"]],
  [["âš¡", "ğŸ¦Œ", "ğŸŒ©ï¸"], ["ğŸ’¨", "â¤ï¸", "ğŸ’ƒ"], ["ğŸ”´", "ğŸŒŸ", "â˜„ï¸"]]
];

type SudoKu4 = [
  [["ğŸ’¨", "ğŸ’ƒ", "ğŸ¦Œ"], ["â˜„ï¸", "â¤ï¸", "ğŸŒ©ï¸"], ["ğŸŒŸ", "âš¡", "ğŸ”´"]],
  [["ğŸŒŸ", "âš¡", "ğŸ”´"], ["ğŸ’¨", "ğŸ’ƒ", "ğŸ¦Œ"], ["â˜„ï¸", "â¤ï¸", "ğŸŒ©ï¸"]],
  [["â˜„ï¸", "â¤ï¸", "ğŸŒ©ï¸"], ["ğŸŒŸ", "âš¡", "ğŸ”´"], ["ğŸ’¨", "ğŸ’ƒ", "ğŸ¦Œ"]],
  /*------------------------------------------------------*/
  [["ğŸ¦Œ", "ğŸ’¨", "ğŸ’ƒ"], ["âš¡", "â˜„ï¸", "â¤ï¸"], ["ğŸ”´", "ğŸŒ©ï¸", "ğŸŒŸ"]],
  [["ğŸŒ©ï¸", "ğŸ”´", "ğŸŒŸ"], ["ğŸ¦Œ", "ğŸ’¨", "ğŸ’ƒ"], ["âš¡", "â˜„ï¸", "â¤ï¸"]],
  [["âš¡", "â˜„ï¸", "â¤ï¸"], ["ğŸŒ©ï¸", "ğŸ”´", "ğŸŒŸ"], ["ğŸ¦Œ", "ğŸ’¨", "ğŸ’ƒ"]],
  /*------------------------------------------------------*/
  [["ğŸ’ƒ", "ğŸ¦Œ", "ğŸ’¨"], ["â¤ï¸", "ğŸŒŸ", "â˜„ï¸"], ["âš¡", "ğŸ”´", "ğŸŒŸ"]],
  [["ğŸ”´", "ğŸŒ©ï¸", "âš¡"], ["ğŸ’ƒ", "ğŸ¦Œ", "ğŸ’¨"], ["â¤ï¸", "ğŸŒŸ", "â˜„ï¸"]],
  [["â¤ï¸", "ğŸŒŸ", "â˜„ï¸"], ["ğŸ”´", "ğŸŒ©ï¸", "âš¡"], ["ğŸ’ƒ", "ğŸ¦Œ", "ğŸ’¨"]]
];

type SudoKu5 = [
  [["ğŸŒ©ï¸", "ğŸ’¨", "â˜„ï¸"], ["ğŸŒŸ", "ğŸ¦Œ", "âš¡"], ["â¤ï¸", "ğŸ”´", "ğŸ’ƒ"]],
  [["ğŸŒŸ", "âš¡", "â¤ï¸"], ["ğŸ”´", "ğŸ’ƒ", "â˜„ï¸"], ["ğŸŒ©ï¸", "ğŸ’¨", "ğŸ¦Œ"]],
  [["ğŸ”´", "ğŸ¦Œ", "ğŸ’ƒ"], ["ğŸ’¨", "â¤ï¸", "ğŸŒ©ï¸"], ["ğŸŒŸ", "âš¡", "â˜„ï¸"]],
  /*------------------------------------------------------*/
  [["â¤ï¸", "â˜„ï¸", "ğŸŒ©ï¸"], ["ğŸ’ƒ", "âš¡", "ğŸ”´"], ["ğŸ’¨", "ğŸ¦Œ", "ğŸŒŸ"]],
  [["ğŸ¦Œ", "ğŸ’ƒ", "âš¡"], ["ğŸŒ©ï¸", "ğŸŒŸ", "ğŸ’¨"], ["ğŸ”´", "â˜„ï¸", "â¤ï¸"]],
  [["ğŸ’¨", "ğŸŒŸ", "ğŸ”´"], ["ğŸ¦Œ", "â˜„ï¸", "â¤ï¸"], ["âš¡", "ğŸ’ƒ", "ğŸŒ©ï¸"]],
  /*------------------------------------------------------*/
  [["â˜„ï¸", "ğŸ”´", "ğŸ’¨"], ["â¤ï¸", "ğŸ’ƒ", "ğŸ¦Œ"], ["ğŸ’ƒ", "ğŸŒŸ", "âš¡"]],
  [["ğŸ’ƒ", "â¤ï¸", "ğŸ¦Œ"], ["âš¡", "ğŸ”´", "ğŸŒŸ"], ["â˜„ï¸", "ğŸŒ©ï¸", "ğŸ’¨"]],
  [["âš¡", "ğŸŒ©ï¸", "ğŸŒŸ"], ["â˜„ï¸", "ğŸ’¨", "ğŸ’ƒ"], ["ğŸ¦Œ", "â¤ï¸", "ğŸ”´"]]
];

type SudoKu6 = [
  [["âš¡", "ğŸ”´", "ğŸŒ©ï¸"], ["ğŸ¦Œ", "â¤ï¸", "ğŸ’¨"], ["ğŸ’¨", "ğŸŒŸ", "â˜„ï¸"]],
  [["â¤ï¸", "ğŸ¦Œ", "ğŸŒŸ"], ["ğŸ’¨", "ğŸŒŸ", "ğŸ”´"], ["ğŸ’ƒ", "âš¡", "ğŸŒ©ï¸"]],
  [["ğŸ’¨", "ğŸ’ƒ", "ğŸŒŸ"], ["â˜„ï¸", "âš¡", "ğŸŒ©ï¸"], ["ğŸ”´", "â¤ï¸", "ğŸ¦Œ"]],
  /*------------------------------------------------------*/
  [["ğŸ¦Œ", "âš¡", "ğŸ”´"], ["â¤ï¸", "ğŸ’ƒ", "ğŸ’¨"], ["â˜„ï¸", "ğŸŒ©ï¸", "ğŸŒŸ"]],
  [["ğŸŒŸ", "ğŸŒ©ï¸", "ğŸ’ƒ"], ["âš¡", "ğŸ”´", "â˜„ï¸"], ["â¤ï¸", "ğŸ¦Œ", "ğŸ’¨"]],
  [["â˜„ï¸", "ğŸ’¨", "â¤ï¸"], ["ğŸŒŸ", "ğŸŒ©ï¸", "ğŸ¦Œ"], ["âš¡", "ğŸ’ƒ", "ğŸ”´"]],
  /*------------------------------------------------------*/
  [["ğŸŒ©ï¸", "â˜„ï¸", "ğŸ’¨"], ["ğŸ’ƒ", "ğŸ¦Œ", "âš¡"], ["ğŸŒŸ", "ğŸ”´", "â¤ï¸"]],
  [["ğŸ”´", "â¤ï¸", "âš¡"], ["ğŸŒ©ï¸", "â˜„ï¸", "ğŸŒŸ"], ["ğŸ¦Œ", "ğŸ’¨", "ğŸ’ƒ"]],
  [["ğŸ’ƒ", "ğŸŒŸ", "ğŸ¦Œ"], ["ğŸ”´", "ğŸ’¨", "â¤ï¸"], ["ğŸŒ©ï¸", "â˜„ï¸", "âš¡"]]
];

/** because "dashing" implies speed */
type Dasher = "ğŸ’¨";

/** representing dancing or grace */
type Dancer = "ğŸ’ƒ";

/** a deer, prancing */
type Prancer = "ğŸ¦Œ";

/** a star for the dazzling, slightly mischievous Vixen */
type Vixen = "ğŸŒŸ";

/** for the celestial body that shares its name */
type Comet = "â˜„ï¸";

/** symbolizing love, as Cupid is the god of love */
type Cupid = "â¤ï¸";

/** representing thunder, as "Donner" means thunder in German */
type Donner = "ğŸŒ©ï¸";

/** meaning lightning in German, hence the lightning bolt */
type Blitzen = "âš¡";

/** for his famous red nose */
type Rudolph = "ğŸ”´";

type Reindeer =
  | Dasher
  | Dancer
  | Prancer
  | Vixen
  | Comet
  | Cupid
  | Donner
  | Blitzen
  | Rudolph;

type MapBox<N extends number> = [
  [[0, 0], [1, 0], [2, 0]],
  [[3, 0], [4, 0], [5, 0]],
  [[6, 0], [7, 0], [8, 0]],
  [[0, 1], [1, 1], [2, 1]],
  [[3, 1], [4, 1], [5, 1]],
  [[6, 1], [7, 1], [8, 1]],
  [[0, 2], [1, 2], [2, 2]],
  [[3, 2], [4, 2], [5, 2]],
  [[6, 2], [7, 2], [8, 2]]
][N];

type ToInt<T> = T extends `${infer N extends number}` ? N : never;

type Flatten<T extends any[][], $acc extends any[] = []> = T extends [
  infer Head extends any[],
  ...infer Tail extends any[][]
]
  ? Flatten<Tail, [...$acc, ...Head]>
  : $acc;

type FlattenSudoku<Sudoku extends Reindeer[][][]> = {
  [Row in keyof Sudoku]: Flatten<Sudoku[Row]>;
};

type GetRow<
  Sudoku extends Reindeer[][],
  Row extends number
> = Sudoku[Row][number];

type GetColumn<
  Sudoku extends Reindeer[][],
  Column extends number
> = Sudoku[number][Column];

type GetBox<
  Sudoku extends Reindeer[][][],
  N extends number,
  $Map extends number[][] = MapBox<N>
> = Sudoku[$Map[number][0]][$Map[number][1]][number];

type CheckDuplicates<Cells extends Reindeer> = Reindeer extends Cells
  ? true
  : false;

type CheckRows<
  Sudoku extends Reindeer[][],
  $Iter extends number = ToInt<keyof Sudoku>
> = $Iter extends number ? CheckDuplicates<GetRow<Sudoku, $Iter>> : false;

type CheckColumns<
  Sudoku extends Reindeer[][],
  $Iter extends number = ToInt<keyof Sudoku>
> = $Iter extends number ? CheckDuplicates<GetColumn<Sudoku, $Iter>> : false;

type CheckBoxes<
  Sudoku extends Reindeer[][][],
  $Iter extends number = ToInt<keyof Sudoku>
> = $Iter extends number ? CheckDuplicates<GetBox<Sudoku, $Iter>> : false;

type Validate<
  Sudoku extends Reindeer[][][],
  $flattenSudoku extends Reindeer[][] = FlattenSudoku<Sudoku>
> =
  | CheckRows<$flattenSudoku>
  | CheckColumns<$flattenSudoku>
  | CheckBoxes<Sudoku> extends true
  ? true
  : false;

type cases = [
  Expect<Equal<Validate<SudoKu1>, true>>,
  Expect<Equal<Validate<SudoKu2>, true>>,
  Expect<Equal<Validate<SudoKu3>, true>>,
  Expect<Equal<Validate<SudoKu4>, false>>,
  Expect<Equal<Validate<SudoKu5>, false>>,
  Expect<Equal<Validate<SudoKu6>, false>>
];
